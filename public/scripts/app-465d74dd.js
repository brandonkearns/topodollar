"use strict";angular.module("incomeMaps",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,e){a.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("state",{url:"/state/:name",templateUrl:"app/state/state.html",controller:"StateCtrl"}),e.otherwise("/")}]),angular.module("incomeMaps").controller("NavbarCtrl",["$scope",function(a){a.date=new Date}]),angular.module("incomeMaps").service("StateService",["$http",function(){}]),angular.module("incomeMaps").controller("StateCtrl",["$scope","$stateParams",function(a,e){function n(a){d3.json("/api/states/"+a,function(a,e){function n(a){d3.select("#databox").text(function(){return"$"+a.properties.income})}var t=_.find(i,function(a){return a.name===e.name}),o=960,r=1160,b=d3.scale.quantize().domain([0,125e3]).range(d3.range(9).map(function(a){return"q"+a+"-9"})),s=d3.select("body").append("svg").attr("width",o).attr("height",r),m=d3.geo.mercator().center(e.data.transform.translate).scale(5e3).translate([o/2,r/2]),v=d3.geo.path().projection(m);s.selectAll("path").data(topojson.feature(e.data,e.data.objects[t.abbreviation]).features).enter().append("path").attr("class",function(a){return b(a.properties.income)}).attr("d",v).on("click",function(a){n(a),console.log(a.properties.income)})})}var i=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"DC",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"Newhampshire",abbreviation:"NH"},{name:"Newjersey",abbreviation:"NJ"},{name:"Newmexico",abbreviation:"NM"},{name:"Newyork",abbreviation:"NY"},{name:"Northcarolina",abbreviation:"NC"},{name:"Northdakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhodeisland",abbreviation:"RI"},{name:"Southcarolina",abbreviation:"SC"},{name:"Southcarolina",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"Westvirginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}];a.newStates=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],a.selected=a.newStates[0],console.log(a.selected),n(e.name),a.showSelected=function(){$state.go("state/"+a.selected.name)}}]),angular.module("incomeMaps").controller("MainCtrl",["$scope",function(a){a.states=[]}]),angular.module("incomeMaps").run(["$templateCache",function(a){a.put("app/main/main.html",'<div class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><h1>TopoDollar</h1><br><h3>income data for all 50 states</h3><div ng-controller="StateCtrl"><select ng-model="selected" ng-options="place.name for place in newStates"></select><pre>{{ selected | json}}</pre><button ng-click="showSelected()">Go</button></div><div class="footer"><p>With â™¥ from <a href="https://twitter.com/Swiip">@Swiip</a></p></div></div>'),a.put("app/state/state.html",'<div class="container"><div ng-controller="StateCtrl"><a ui-sref="home"><div id="databox">TopoDollar</div></a><p>Click on a census tract to see its median income.</p></div></div>'),a.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" ui-sref="home"><span class="glyphicon glyphicon-map-marker"></span> TopoDollar</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ui-sref="state">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);