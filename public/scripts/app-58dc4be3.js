"use strict";angular.module("incomeMaps",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(n,a){n.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("map",{url:"/map",templateUrl:"app/map/map.html",controller:"MapCtrl"}),a.otherwise("/")}]),angular.module("incomeMaps").controller("NavbarCtrl",["$scope",function(n){n.date=new Date}]),angular.module("incomeMaps").controller("MainCtrl",["$scope",function(n){n.states=[],angular.forEach(n.awesomeThings,function(n){n.rank=Math.random()})}]),angular.module("incomeMaps").run(["$templateCache",function(n){n.put("app/main/main.html",'<div class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><div class="row"><div class="col-sm-6 col-md-4" ng-repeat="awesomeThing in awesomeThings | orderBy:\'rank\'"><div class="thumbnail"><img class="pull-right" ng-src="assets/images/{{awesomeThing.logo}}" alt="{{awesomeThing.title}}"><div class="caption"><h3>{{awesomeThing.title}}</h3><p>{{awesomeThing.description}}</p><p><a ng-href="{{awesomeThing.url}}">{{awesomeThing.url}}</a></p></div></div></div></div><hr><div class="footer"><p>With â™¥ from <a href="https://twitter.com/Swiip">@Swiip</a></p></div></div>'),n.put("app/map/map.html","<html><head><script src=\"http://d3js.org/d3.v3.min.js\"></script><script src=\"http://d3js.org/queue.v1.min.js\"></script><script src=\"http://d3js.org/topojson.v1.min.js\"></script><title>Project 4 Test</title></head><body><style>\n\n    .q0-9 { fill:rgb(247,251,255); }\n    .q1-9 { fill:rgb(222,235,247); }\n    .q2-9 { fill:rgb(198,219,239); }\n    .q3-9 { fill:rgb(158,202,225); }\n    .q4-9 { fill:rgb(107,174,214); }\n    .q5-9 { fill:rgb(66,146,198); }\n    .q6-9 { fill:rgb(33,113,181); } \n    .q7-9 { fill:rgb(8,81,156); }\n    .q8-9 { fill:rgb(8,48,107); }\n\n  </style><div id=\"databox\">This is where data goes.</div><script>\n    var i;\n    var width = 960,\n        height = 1160;\n\n    var incomeById = d3.map();\n\n    var quantize = d3.scale.quantize()\n        .domain([0, 150000])\n        .range(d3.range(9).map(function(i) { return 'q' + i + '-9'; }));\n\n    var svg = d3.select('body').append('svg')\n        .attr('width', width)\n        .attr('height', height);\n\n    var projection = d3.geo.mercator()\n                     .center([-83.1132, 32.9605])\n                     // .rotate([0, 0])\n                     // .parallels([50, 60])\n                     .scale(6000)\n                     .translate([width / 2, height / 2]);\n\n    var path = d3.geo.path()\n               .projection(projection);\n\n    // var incomes = d3.csv('ga_tract_median.csv', function(data) {\n    //       console.log(data);\n    //       for (var i = 0; i < data.length; i++) {\n    //         // console.log(data[i].HC02_EST_VC02);\n    //       };\n    //       return data;\n    // });\n\n\n    queue()\n        .defer(d3.json, 'georgia.json')\n        // .defer(d3.csv, 'ga_tract_median.csv', function(d) { incomeById.set(d.GEOID2, +d.HC02_EST_VC02); })\n        .await(ready);  \n\n\n  // d3.json('georgia.json', function(error, georgia) {\n  //   var georgia = topojson.feature(georgia, georgia.objects.GA).features;\n    \n  //     d3.csv('ga_tract_median.csv', function(error, csv) {\n\n  //       csv.forEach(function(d, i) {\n  //         georgia.forEach(function(e, j) {\n  //           if (d.GEOID2 === e.id) {\n  //             // console.log(d.HC02_EST_VC02);\n  //             return d.HC02_EST_VC02;\n  //           }\n  //         })\n  //       })\n  //     svg.append('g').selectAll('path')\n  //       .data(georgia)\n  //       .enter()\n  //       .append('svg:path')\n  //       .attr('class', function(d, i) { return 'tract' + d.id; })\n  //       .on('click', function(d ,i) {\n  //         console.log(d);\n  //       });\n\n  //     })    \n  // })\n\n    function ready(error, georgia, csv) {\n      // svg.append('path')\n      console.log(topojson.feature(georgia, georgia.objects.GA).features);\n      svg.selectAll('path')\n        .data(topojson.feature(georgia, georgia.objects.GA).features)\n        .enter().append('path')\n        .attr('class', function(d) { return quantize(d.properties.income); })\n        .attr('d', path)\n      // svg.selectAll('tract')\n        .on('click', function(d) {\n          report_data(d);\n          console.log(d.properties.income);\n        })\n      }\n\n     function report_data(tract) {\n      d3.select('#databox').text(function() {\n        return tract.properties.income;\n      });\n     }               \n    // d3.json('georgia.json', function(error, georgia) {\n    //   console.log(georgia);\n      // svg.append('path')\n      //   .datum(topojson.mesh(georgia, georgia.objects.GA))\n      //   .attr(\"d\", path)\n      //   .attr('class', 'subunit-boundary');\n    //   svg.selectAll('.tract')\n    //     .data(topojson.feature(georgia, georgia.objects.GA).features)\n    //     .enter().append('path')\n    //     .attr('class', function(d) { return 'tract' + d.id; })\n    //     .attr('d', path)\n    //     .on('mouseover', function(d){d3.select( '.tract' + d.id ).style('fill', 'aliceblue');\n    //       console.log(d);});\n    //     ;\n    // });        \n  </script></body></html>"),n.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);